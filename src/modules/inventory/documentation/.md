
# OAS API Documentation

**Base URL:** `{{baseURL}}`

This document describes the endpoints available in the OAS API for user authentication and inventory management, including products, tags, categories, suppliers, inventory points, and purchases.

---

## User Authentication

### 1. Get CSRF Token

- **Method:** `GET`
- **Endpoint:** `/api/auth/csrf`
- **Description:** Retrieves a CSRF token for secure authentication.
- **Success Response:**
```json
{
  "csrfToken": "<token>"
}
```

---

### 2. Login with Credentials

- **Method:** `POST`
- **Endpoint:** `/api/auth/callback/credentials`
- **Description:** Authenticates a user using email and password with a CSRF token.
- **Headers:**
  - `Cookie: next-auth.csrf-token=<token>`
- **Request Body:**
```json
{
  "email": "your-email@example.com",
  "password": "your-password",
  "csrfToken": "<token>"
}
```
- **Response:** HTML or redirect response with session cookies.

---

## Inventory Management

### Products

#### 1. Get All Products

- **Method:** `GET`
- **Endpoint:** `/api/inventory/product`
- **Description:** Returns a list of all products.

#### 2. Add New Product

- **Method:** `POST`
- **Endpoint:** `/api/inventory/product`
- **Request Body:**
```json
{
  "product_name": "Keyboard Compact",
  "product_barcode": 1666686,
  "product_description": "Slim wireless keyboard",
  "product_location": "Store Room C - Shelf 5",
  "unit_id": 2,
  "category_id": 1,
  "tag_id": 4,
  "buying_price": 38000,
  "selling_price": 52000,
  "currency_id": 1,
  "product_status": 1,
  "supplier_id": 5,
  "inventory_point_id": 3
}
```

#### 3. Update Product

- **Method:** `PATCH`
- **Endpoint:** `/api/inventory/product/{id}`
- **Request Body:**
```json
{
  "buying_price": 25000,
  "selling_price": 76000
}
```

#### 4. Delete Product

- **Method:** `DELETE`
- **Endpoint:** `/api/inventory/product/{id}`

---

### Tags

#### 1. Create Tag

- **Method:** `POST`
- **Endpoint:** `/api/inventory/tag`
- **Request Body:**
```json
{
  "tag": "Mouse"
}
```

#### 2. Get All Tags

- **Method:** `GET`
- **Endpoint:** `/api/inventory/tag`

#### 3. Update Tag

- **Method:** `PATCH`
- **Endpoint:** `/api/inventory/tag/{id}`
- **Request Body:**
```json
{
  "tag": "Laptops"
}
```

#### 4. Delete Tag

- **Method:** `DELETE`
- **Endpoint:** `/api/inventory/tag/{id}`

---

### Categories

#### 1. Create Category

- **Method:** `POST`
- **Endpoint:** `/api/inventory/category`
- **Request Body:**
```json
{
  "category": "Music"
}
```

#### 2. Get All Categories

- **Method:** `GET`
- **Endpoint:** `/api/inventory/category`

#### 3. Update Category

- **Method:** `PATCH`
- **Endpoint:** `/api/inventory/category/{id}`
- **Request Body:**
```json
{
  "category": "Maths"
}
```

#### 4. Delete Category

- **Method:** `DELETE`
- **Endpoint:** `/api/inventory/category/{id}`

---

### Suppliers

#### 1. Create Supplier

- **Method:** `POST`
- **Endpoint:** `/api/inventory/supplier`
- **Request Body:**
```json
{
  "supplier_name": "SolarBright Africa Ltd",
  "supplier_email": "info@solarbright.africa",
  "supplier_phone": "+256709998877",
  "supplier_address": "Entebbe Road, Opp. Freedom City",
  "supplier_tinNumber": 334455667
}
```

#### 2. Get All Suppliers

- **Method:** `GET`
- **Endpoint:** `/api/inventory/supplier`

#### 3. Update Supplier

- **Method:** `PATCH`
- **Endpoint:** `/api/inventory/supplier/{id}`
- **Request Body:**
```json
{
  "supplier_tinNumber": 1053636782378
}
```

#### 4. Delete Supplier

- **Method:** `DELETE`
- **Endpoint:** `/api/inventory/supplier/{id}`

---

### Inventory Points

#### 1. Create Inventory Point

- **Method:** `POST`
- **Endpoint:** `/api/inventory/inventory_point`
- **Request Body:**
```json
{
  "inventory_point": "Akamwesi"
}
```

#### 2. Get All Inventory Points

- **Method:** `GET`
- **Endpoint:** `/api/inventory/inventory_point`

#### 3. Update Inventory Point

- **Method:** `PATCH`
- **Endpoint:** `/api/inventory/inventory_point/{id}`
- **Request Body:**
```json
{
  "inventory_point": "Show Room"
}
```

#### 4. Delete Inventory Point

- **Method:** `DELETE`
- **Endpoint:** `/api/inventory/inventory_point/{id}`

---

### Purchases

#### 1. Create Purchase

- **Method:** `POST`
- **Endpoint:** `/api/inventory/purchase`
- **Request Body:**
```json
{
  "inventory_point_id": 1,
  "supplier_id": 5,
  "purchase_items": [
    {
      "product_id": 16,
      "quantity": 5,
      "unit_cost": 1400,
      "total_cost": 7000
    }
  ]
}
```
